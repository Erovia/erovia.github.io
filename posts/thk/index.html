<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.80.0" />
    <meta name="description" content="Erovia&#39;s QMK Corner">
<meta name="author" content="Erovia">

    <link rel="shortcut icon" href="/images/logo.jpg" type="image/x-icon" />

    <title>Planck Through Hole Kit Build log :: Erovia&#39;s QMK Corner</title>

    
    <link href="/css/nucleus.css?1611941158" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1611941158" rel="stylesheet">
    <link href="/css/hybrid.css?1611941158" rel="stylesheet">
    <link href="/css/featherlight.min.css?1611941158" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1611941158" rel="stylesheet">
    <link href="/css/auto-complete.css?1611941158" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1611941158" rel="stylesheet">
    <link href="/css/theme.css?1611941158" rel="stylesheet">
    <link href="/css/hugo-theme.css?1611941158" rel="stylesheet">
    
    <link href="/css/theme-erovia.css?1611941158" rel="stylesheet">
    
    

    <script src="/js/jquery-3.3.1.min.js?1611941158"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/posts/thk/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a href="/">
<img src="/images/logo.jpg" alt="Erovia's QMK Corner">
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1611941158"></script>
<script type="text/javascript" src="/js/auto-complete.js?1611941158"></script>
<script type="text/javascript">
    
        var baseurl = "\/";
    
</script>
<script type="text/javascript" src="/js/search.js?1611941158"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/faq/" title="Frequently Asked Questions" class="dd-item 
        
        
        
        ">
      <a href="/faq/">
          FAQ
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/posts/" title="Posts" class="dd-item 
        parent
        
        
        ">
      <a href="/posts/">
          Posts
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/posts/workflow/" title="My personal workflow for QMK" class="dd-item ">
        <a href="/posts/workflow/">
        Workflow
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/posts/thk/" title="Planck Through Hole Kit Build log" class="dd-item active">
        <a href="/posts/thk/">
        Planck THK
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/posts/testing/" title="Testing Pull Requests" class="dd-item ">
        <a href="/posts/testing/">
        Testing
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/posts/contributing/" title="Contributing" class="dd-item ">
        <a href="/posts/contributing/">
        Contributing
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/snippets/" title="Small code snippets" class="dd-item 
        
        
        
        ">
      <a href="/snippets/">
          Snippets
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/tools/" title="Tools" class="dd-item 
        
        
        
        ">
      <a href="/tools/">
          Tools
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://docs.qmk.fm"><i class='fas fa-book'></i> QMK Docs</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://github.com/Erovia/qmk_firmware"><i class='fab fa-github'></i> My QMK fork</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://www.reddit.com/r/olkb"><i class='fab fa-reddit'></i> OLKB subreddit</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://discord.gg/PRFxj8"><i class='fab fa-discord'></i> QMK Discord</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <p>
Made with <i class="fas fa-heart"></i> by Erovia
</p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                  
                  
                  
                  <div id="top-github-link">
                    <a class="github-link" title='Edit this page' href="https://github.com/Erovia/corner/tree/master/content/posts/thk.md" target="blank">
                      <i class="fas fa-code-branch"></i>
                      <span id="top-github-link-text">Edit this page</span>
                    </a>
                  </div>
                  
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'></a> > <a href='/posts/'>Posts</a> > Planck Through Hole Kit Build log
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#the-planck-through-hole-kit">The Planck Through Hole Kit</a></li>
        <li><a href="#hardware">Hardware</a></li>
        <li><a href="#isp-flashing">ISP Flashing</a></li>
        <li><a href="#bootloader">Bootloader</a></li>
        <li><a href="#firmware">Firmware</a></li>
        <li><a href="#case">Case</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Planck Through Hole Kit Build log
            </h1>
          

        


<h3 id="the-planck-through-hole-kit">The Planck Through Hole Kit</h3>
<p>The Planck Through Hole Kit (THK) was announced by Jack Humbert on the <a href="https://www.reddit.com/r/olkb/comments/9kgdds/planck_through_hole_kit_all_throughhole/">/r/olkb subreddit</a> on 2018.10.01.<br>
<a href="https://github.com/olkb/planck_thk">The hardware</a> was released under GPLv3 with the intention to be accessible to everyone.<br>
The <a href="https://github.com/qmk/qmk_firmware/pull/4034">original QMK pull request</a> never got merged and documentation/information about the board is scarce.<br>
As QMK is a pretty fast-moving project, the original code for the keyboard did not build with new QMK.</p>
<p>I first heard about this keyboard when a community member tried to flash his board and asked for help.<br>
Sadly, I was not able to work out all the things without having access to the hardware and my ambition to make it work again had to be put on hold.<br>
Until Jack was kind enough to send me two unassembled kits.<br>
Now I have the hardware fully working with mainline QMK so I thought I&rsquo;ll document a process of building and compiling and flashing this board.</p>
<h3 id="hardware">Hardware</h3>
<p>The gerber files for the PCB and the bottom case can be downloaded from <a href="https://github.com/olkb/planck_thk/releases">the OLKB GitHub</a>.<br>
That repo also has a nice link to the <a href="https://octopart.com/bom-tool/NWghestL">bill of materials (BOM)</a> for all the components needed for the assembly.<br>
Of course, most can be substituted with similar parts from the local store, dad&rsquo;s shed or Aliexpress.</p>
<p>As the BOM has the &ldquo;Schematic Reference&rdquo; field filled in for all components, building the board is quite easy.</p>

<div class="notices note" ><p>When soldering the LEDs, the cathode (shorter leg) should face the USB port.</p>
</div>

<p>The BOM for future reference: </p>
<table>
<thead>
<tr>
<th>Qty</th>
<th>Line Item</th>
<th>Manufacturer</th>
<th>MPN</th>
<th>Octopart URL</th>
<th>Schematic Reference</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>UB-M5BR-DM14-4D</td>
<td>JST</td>
<td>UB-M5BR-DM14-4D</td>
<td><a href="https://octopart.com/ub-m5br-dm14-4d-jst-54155138">https://octopart.com/ub-m5br-dm14-4d-jst-54155138</a></td>
<td>USB PORT</td>
</tr>
<tr>
<td>1</td>
<td>TP124005-2</td>
<td>DB Unlimited</td>
<td>TP124005-2</td>
<td><a href="https://octopart.com/tp124005-2-db+unlimited-59659708">https://octopart.com/tp124005-2-db+unlimited-59659708</a></td>
<td>SPEAKER</td>
</tr>
<tr>
<td>48</td>
<td>1N4151TR</td>
<td>Vishay</td>
<td>1N4151TR</td>
<td><a href="https://octopart.com/1n4151tr-vishay-9342963">https://octopart.com/1n4151tr-vishay-9342963</a></td>
<td>D*</td>
</tr>
<tr>
<td>1</td>
<td>1301.9303</td>
<td>Schurter</td>
<td>1301.9303</td>
<td><a href="https://octopart.com/1301.9303-schurter-5416046">https://octopart.com/1301.9303-schurter-5416046</a></td>
<td>RESET</td>
</tr>
<tr>
<td>1</td>
<td>ECS-160-20-4VX</td>
<td>ECS International</td>
<td>ECS-160-20-4VX</td>
<td><a href="https://octopart.com/ecs-160-20-4vx-ecs+international-19118787">https://octopart.com/ecs-160-20-4vx-ecs+international-19118787</a></td>
<td>Y1</td>
</tr>
<tr>
<td>1</td>
<td>S5B-PH-K-S(LF)(SN)</td>
<td>JST</td>
<td>S5B-PH-K-S(LF)(SN)</td>
<td><a href="https://octopart.com/s5b-ph-k-s%28lf%29%28sn%29-jst-248886">https://octopart.com/s5b-ph-k-s%28lf%29%28sn%29-jst-248886</a></td>
<td>ALT USB PORT</td>
</tr>
<tr>
<td>1</td>
<td>ATMEGA32A-PU</td>
<td>Microchip</td>
<td>ATMEGA32A-PU</td>
<td><a href="https://octopart.com/atmega32a-pu-microchip-77760288">https://octopart.com/atmega32a-pu-microchip-77760288</a></td>
<td>MICROCONTROLLER</td>
</tr>
<tr>
<td>1</td>
<td>1-2199299-5</td>
<td>TE Connectivity</td>
<td>1-2199299-5</td>
<td><a href="https://octopart.com/1-2199299-5-te+connectivity-34963610">https://octopart.com/1-2199299-5-te+connectivity-34963610</a></td>
<td>MICROCONTROLLER SOCKET</td>
</tr>
<tr>
<td>1</td>
<td>LD1117AV33</td>
<td>STMicroelectronics</td>
<td>LD1117AV33</td>
<td><a href="https://octopart.com/ld1117av33-stmicroelectronics-526794">https://octopart.com/ld1117av33-stmicroelectronics-526794</a></td>
<td>POWER REGULATOR</td>
</tr>
<tr>
<td>3</td>
<td>s04b-sz</td>
<td>JST</td>
<td>S04B-SZ</td>
<td><a href="https://octopart.com/s04b-sz-jst-87088753">https://octopart.com/s04b-sz-jst-87088753</a></td>
<td>I2C</td>
</tr>
<tr>
<td>1</td>
<td>210-4ES</td>
<td>CTS Components</td>
<td>210-4ES</td>
<td><a href="https://octopart.com/210-4es-cts+components-19788403">https://octopart.com/210-4es-cts+components-19788403</a></td>
<td>DIP SWITCH</td>
</tr>
<tr>
<td>1</td>
<td>67997-410HLF</td>
<td>Amphenol ICC / FCI</td>
<td>67997-410HLF</td>
<td><a href="https://octopart.com/67997-410hlf-amphenol+icc+%2F+fci-90333672">https://octopart.com/67997-410hlf-amphenol+icc+%2F+fci-90333672</a></td>
<td>JTAG HEADER</td>
</tr>
<tr>
<td>1</td>
<td>68602-406HLF</td>
<td>Amphenol ICC / FCI</td>
<td>68602-406HLF</td>
<td><a href="https://octopart.com/68602-406hlf-amphenol+icc+%2F+fci-90340423">https://octopart.com/68602-406hlf-amphenol+icc+%2F+fci-90340423</a></td>
<td>ISP HEADER</td>
</tr>
<tr>
<td>4</td>
<td>CFR-25JT-52-68R</td>
<td>Yageo</td>
<td>CFR-25JT-52-68R</td>
<td><a href="https://octopart.com/cfr-25jt-52-68r-yageo-16252182">https://octopart.com/cfr-25jt-52-68r-yageo-16252182</a></td>
<td>R1, R2, R4, R5</td>
</tr>
<tr>
<td>1</td>
<td>LTL-4222</td>
<td>Lite-On</td>
<td>LTL-4222</td>
<td><a href="https://octopart.com/ltl-4222-lite-on-869424">https://octopart.com/ltl-4222-lite-on-869424</a></td>
<td>PWR</td>
</tr>
<tr>
<td>1</td>
<td>LTL-4232</td>
<td>Lite-On</td>
<td>LTL-4232</td>
<td><a href="https://octopart.com/ltl-4232-lite-on-868849">https://octopart.com/ltl-4232-lite-on-868849</a></td>
<td>ACT</td>
</tr>
<tr>
<td>1</td>
<td>SR595C104KARTR1</td>
<td>AVX</td>
<td>SR595C104KARTR1</td>
<td><a href="https://octopart.com/sr595c104kartr1-avx-2348402">https://octopart.com/sr595c104kartr1-avx-2348402</a></td>
<td>C3</td>
</tr>
<tr>
<td>2</td>
<td>SR151A200JAR</td>
<td>AVX</td>
<td>SR151A200JAR</td>
<td><a href="https://octopart.com/sr151a200jar-avx-20091099">https://octopart.com/sr151a200jar-avx-20091099</a></td>
<td>C1, C2</td>
</tr>
<tr>
<td>1</td>
<td>FK18X5R1A475K</td>
<td>TDK</td>
<td>FK18X5R1A475K</td>
<td><a href="https://octopart.com/fk18x5r1a475k-tdk-21525622">https://octopart.com/fk18x5r1a475k-tdk-21525622</a></td>
<td>C4</td>
</tr>
<tr>
<td>2</td>
<td>PEC12R-4217F-N0024</td>
<td>Bourns</td>
<td>PEC12R-4217F-N0024</td>
<td><a href="https://octopart.com/pec12r-4217f-n0024-bourns-26648364">https://octopart.com/pec12r-4217f-n0024-bourns-26648364</a></td>
<td>ENCODERS</td>
</tr>
<tr>
<td>1</td>
<td>CFR-25JT-52-1K5</td>
<td>Yageo</td>
<td>CFR-25JT-52-1K5</td>
<td><a href="https://octopart.com/cfr-25jt-52-1k5-yageo-16252146">https://octopart.com/cfr-25jt-52-1k5-yageo-16252146</a></td>
<td>R3</td>
</tr>
</tbody>
</table>
<h3 id="isp-flashing">ISP Flashing</h3>
<p>The first time, you will need to ISP flash the microcontroller to set the fuses and flash the bootloader.<br>
The <a href="https://docs.qmk.fm/#/isp_flashing_guide">QMK ISP flashing quide</a> shows how you can use a spare ProMicro or Teensy as flasher, but I like my cheap USBasp I got off of Aliexpress.</p>

<div class="notices warning" ><p>The keyboard has a 6-pin ISP header which makes you think that you can just connect your 6-pin USBasp, but sadly the pins are mirrored on the board.</p>
</div>

<p>My recommendation is to use female-to-male dupont cables for the connection.</p>
<p><img src="/images/thk_isp_pins.jpg" alt="Planck THK ISP pins"></p>
<p>I set my USBasp to 3.3V, but it should work with 5V as well.</p>
<p>If everything is connected well, the power (red) LED should be on, your computer should recognize the USBasp and the flashing command below should work without any errors.<br>
If you experience any issues, the first thing you check should be the correct pin connections.</p>
<h3 id="bootloader">Bootloader</h3>
<p>Originally, the bootloadHID bootloader was used for the THK as can be seen in <a href="https://github.com/qmk/qmk_firmware/tree/planck_thk">the old branch</a> and if someone would want that, the following <a href="https://gist.github.com/jackhumbert/50cbfead6ab27b6b3ee42f8c59d72776">gist</a> can be of some help.<br>
Personally, I think USBasp is a much nicer one as it can be used with <code>avrdude</code> and other, newer through hole boards use it as well.</p>
<p>As USBasp usually requires two buttons to reset the board, but the THK has only one, I chose a <a href="https://github.com/gblargg/usbasploader">fork</a> that has some nice features, like the ability to boot into bootloder with a reset button.<br>
I have a <a href="https://github.com/Erovia/planck_thk_usbasploader">fork, pre-configured for the THK</a>.</p>
<p>Setting the fuses, compiling and flashing the bootloader is this simple:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#f92672">[</span>erovia@ws<span style="color:#f92672">]</span>$ git clone https://github.com/Erovia/planck_thk_usbasploader.git
<span style="color:#f92672">[</span>erovia@ws<span style="color:#f92672">]</span>$ cd planck_thk_usbasploader
<span style="color:#f92672">[</span>erovia@ws<span style="color:#f92672">]</span>$ make fuse
<span style="color:#f92672">[</span>erovia@ws<span style="color:#f92672">]</span>$ make flash
</code></pre></div><p>Once done, disconnect the ISP flasher from the keyboard, connect the board to your computer and press the <strong>Reset</strong> button.<br>
If everything went well, it should be recognized as an USBasp flasher.</p>
<h3 id="firmware">Firmware</h3>
<p>The firmware currently lives in <a href="https://github.com/Erovia/qmk_firmware/tree/planck_thk_revived">my QMK fork</a>, but I&rsquo;ll get it merged upstream, to not repeat history.<br>
The board should be compatible with most Planck and ortho4x12/planck_mit keymaps, but I created a <code>thk</code> one, to showcase its unique features.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#f92672">[</span>erovia@ws<span style="color:#f92672">]</span>$ qmk flash -kb planck/thk -km thk
</code></pre></div><h3 id="case">Case</h3>
<p><em>Soon&hellip;</em></p>


<footer class="footline">
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


	 
	 
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1611941158"></script>
    <script src="/js/perfect-scrollbar.min.js?1611941158"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1611941158"></script>
    <script src="/js/jquery.sticky.js?1611941158"></script>
    <script src="/js/featherlight.min.js?1611941158"></script>
    <script src="/js/highlight.pack.js?1611941158"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1611941158"></script>
    <script src="/js/learn.js?1611941158"></script>
    <script src="/js/hugo-learn.js?1611941158"></script>

    <link href="/mermaid/mermaid.css?1611941158" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1611941158"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

